{"ast":null,"code":"import axios from'axios';// הגדרת axios עם baseURL ישיר - FIXED FOR RENDER\nconst apiClient=axios.create({baseURL:'https://todoapis-qdh6.onrender.com',headers:{'Content-Type':'application/json'}});// מזריק JWT אוטומטית\napiClient.interceptors.request.use(config=>{const token=localStorage.getItem('jwt');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;});// טיפול בשגיאות\napiClient.interceptors.response.use(response=>response,error=>{var _error$response;console.error('API Error:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);if(error.response&&error.response.status===401){localStorage.removeItem('jwt');if(window.location.pathname!=='/'){window.location.href='/';}}return Promise.reject(error);});export default{// =====================\n// Auth\n// =====================\nregister:async(username,password)=>{const result=await apiClient.post('/register',{username,passwordHash:password});return result.data;},login:async(username,password)=>{const result=await apiClient.post('/login',{username,password});const token=result.data.token;localStorage.setItem('jwt',token);// שמירת JWT ב-localStorage\nreturn token;},logout:()=>{localStorage.removeItem('jwt');},// =====================\n// Tasks\n// =====================\ngetTasks:async()=>{const result=await apiClient.get('/tasks');return result.data;},addTask:async name=>{const result=await apiClient.post('/tasks',{name,isComplete:false});return result.data;},setCompleted:async(id,name,isComplete)=>{const result=await apiClient.put(\"/tasks/\".concat(id),{id,name,isComplete});return result.data;},deleteTask:async id=>{await apiClient.delete(\"/tasks/\".concat(id));}};","map":{"version":3,"names":["axios","apiClient","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","response","error","_error$response","console","data","message","status","removeItem","window","location","pathname","href","Promise","reject","register","username","password","result","post","passwordHash","login","setItem","logout","getTasks","get","addTask","name","isComplete","setCompleted","id","put","deleteTask","delete"],"sources":["C:/Users/user1/Desktop/תכנות-שנה ב/פרקטיקוד/4/ToDoListReact-master/src/service.js"],"sourcesContent":["import axios from 'axios';\n\n// הגדרת axios עם baseURL ישיר - FIXED FOR RENDER\nconst apiClient = axios.create({\n  baseURL: 'https://todoapis-qdh6.onrender.com',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// מזריק JWT אוטומטית\napiClient.interceptors.request.use((config) => {\n  const token = localStorage.getItem('jwt');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// טיפול בשגיאות\napiClient.interceptors.response.use(\n  response => response,\n  error => {\n    console.error('API Error:', error.response?.data || error.message);\n    if (error.response && error.response.status === 401) {\n      localStorage.removeItem('jwt');\n      if (window.location.pathname !== '/') {\n        window.location.href = '/';\n      }\n    }\n    return Promise.reject(error);\n  }\n);\n\n\nexport default {\n  // =====================\n  // Auth\n  // =====================\n  register: async (username, password) => {\n    const result = await apiClient.post('/register', { username, passwordHash: password });\n    return result.data;\n  },\n\n  login: async (username, password) => {\n    const result = await apiClient.post('/login', { username, password });\n    const token = result.data.token;\n    localStorage.setItem('jwt', token); // שמירת JWT ב-localStorage\n    return token;\n  },\n\n  logout: () => {\n    localStorage.removeItem('jwt');\n  },\n\n  // =====================\n  // Tasks\n  // =====================\n  getTasks: async () => {\n    const result = await apiClient.get('/tasks');\n    return result.data;\n  },\n\n  \n  addTask: async (name) => {\n    const result = await apiClient.post('/tasks', { name, isComplete: false });\n    return result.data;\n  },\n\n  setCompleted: async (id, name, isComplete) => {\n    const result = await apiClient.put(`/tasks/${id}`, { id, name, isComplete });\n    return result.data;\n  },\n\n  deleteTask: async (id) => {\n    await apiClient.delete(`/tasks/${id}`);\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}